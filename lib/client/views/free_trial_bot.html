<template name='freeTrialBot'>
  <div class='pg-bot'>
    <div class='pg-bot-header'>
      <p class='pg-bot-header-left'>Our Profile Survey can help you choose a college by asking you 20 simple questions.</p>

      <div class='pg-bot-header-right'>
        <form id='js-sms-handoff' data-step='{{ step }}'>
          You can also complete these questions via text message.
          <input type='text' placeholder='123-456-7890'
          name='phone'
          class='js-sms-handoff-phone'
          value='{{ currentUser.profile.phone }}' />
          <button type='submit js-sms-handoff' data-step='{{ step }}'>Go</button>
        </form>
      </div>
    </div>
    <div class='pg-bot-body'>
      <div class='pg-bot-answers'>
        {{#each allAnswers }}
          <div class='q-and-a'>
            <div class='question'>
              <a href='{{ pathFor "freeTrialBot" step=step }}'>
                <span class='step'>{{ step }}</span> {{ prompt }}
              </a>
            </div>
            <div class='answer'>{{ answer }}</div>
          </div>
        {{/each}}
      </div>
      <div class='pg-bot-question'>
        {{#with currentQuestion step }}
          {{#if done}}
            <p>Thanks, all done!</p>
          {{else}}
            <div class='question-count'>
              Question {{ num }} of {{ totalNum }}
            </div>
            <div class='question'>
              {{ question }}
            </div>
            <div class='answer'>
              {{#autoForm collection="FreeTrialBots" id="freeTrialBot" doc=doc }}
                <input type='hidden' value='{{ doc.userId }}' name='userId'
                       data-schema-key='userId'/>
                {{#if loopn}}
                  <table>
                    <thead>
                      <tr>
                        {{#each loopn}}
                        <th>{{ prompt }}</th>
                        {{/each}}
                        <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class='js-add-multiple-row'>
                        {{#each loopn}}
                          <td>
                            {{> afQuickField name=field options="auto" label-style="display: none"  style='width: 100%;' }}
                          </td>
                        {{/each}}
                        <td><button class='ui-btn js-add-multiple' data-step='{{ ../../step }}'>Add</button></td>
                      </tr>
                    {{#each table}}
                      <tr>
                        {{#each fields }}
                          <td>
                            {{ value }}
                          </td>
                        {{/each}}
                        <td>
                          <button class='ui-btn js-remove-multiple'
                            data-index='{{ index }}'
                            data-remove-schema-key='{{ schemaKey }}'>
                            Remove
                          </button>
                        </td>
                      </tr>
                    {{/each}}
                    </tbody>
                  </table>
                {{/if}}
                {{#if branch}}
                  {{#each branch}}
                    {{ prompt }}
                    {{> afQuickField name=field options="auto" label-style="display: none" }}
                  {{/each}}
                {{/if}}
                {{#if multipleBooleans }}
                  {{#each multipleBooleans}}
                    {{> afQuickField name=field options="auto" label-style="display: none" }}
                  {{/each}}
                {{/if}}
                {{#if field}}
                  {{> afQuickField name=field options="auto" label-style="display: none" }}
                {{/if}}
              {{/autoForm}}
            </div>
            <div class='nav'>
              <button class='js-nav-prev ui-btn' data-step='{{ ../step }}'
                {{prevDisabled ../step}}>Prev</button>
              <button class='js-nav-next ui-btn' data-step='{{ ../step }}'
                {{nextDisabled ../step}}>Next</button>
            </div>
          {{/if}}
        {{/with}}
        {{ renderDatepickers }}
      </div>
    </div>
  </div>

</template>
